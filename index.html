<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Forum Program</title>
    <meta
      name="description"
      content="Forum Program"
    />
    <style>
      /* ===== Design Tokens ===== */
      :root {
        --bg: #ffffff;
        --fg: #0f172a; /* slate-900 */
        --muted: #475569; /* slate-600 */
        --card: #f8fafc; /* slate-50 */
        --border: #e2e8f0; /* slate-200 */
        --secondary: #0b0b0b; /* black for light theme secondary */
        --accent: #d4af37; /* gold */
        --brand-green: #097969; /* subtle green */
        --link: #0ea5e9; /* sky-500 */
        --radius: 22px; /* bigger rounded corners */
        --space-section: 10px; /* spacing between blocks */
        --space-similar: 2.5px; /* spacing between similar blocks */
        --shadow: 0 10px 20px rgba(0, 0, 0, 0.06);
        --shadow-strong: 0 16px 40px rgba(0, 0, 0, 0.12);
        --chips-color: #000000;
      }
      .theme-dark {
        --bg: #0b1220; /* deep navy */
        --fg: #e5e7eb; /* slate-200 */
        --muted: #94a3b8; /* slate-400 */
        --card: #0f172a; /* slate-900 */
        --border: #1f2937; /* slate-800 */
        --secondary: #ffffff; /* white for dark theme secondary */
        --accent: #d4af37; /* gold persists */
        --brand-green: #1ca98c; /* brighter green for dark bg */
        --link: #38bdf8; /* sky-400 */
        --shadow: 0 10px 20px rgba(0, 0, 0, 0.35);
        --shadow-strong: 0 16px 40px rgba(0, 0, 0, 0.55);
        --chips-color: #ffffff;
      }

      /* ===== Base Reset ===== */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
         overflow: hidden;
        margin: 0;
        margin-top: calc(100vh/6);
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans,
          Noto Naskh Arabic, Amiri, Tahoma, "Helvetica Neue", Arial, sans-serif;
        background: var(--bg);
        color: var(--fg);
        line-height: 1.45;
        /* Subtle geometric background with an Arabian feel, non-religious */
        background-image: radial-gradient(
            circle at 25% 15%,
            rgba(212, 175, 55, 0.1),
            transparent 35%
          ),
          radial-gradient(
            circle at 75% 85%,
            rgba(9, 121, 105, 0.1),
            transparent 35%
          ),
          linear-gradient(135deg, rgba(0, 0, 0, 0.03) 8%, transparent 8%),
          linear-gradient(45deg, rgba(0, 0, 0, 0.03) 8%, transparent 8%);
        background-size: auto, auto, 12px 12px, 12px 12px;
        background-position: center;
      }
      a {
        color: var(--link);
        text-decoration: none;
      }
      img {
        max-width: 100%;
        display: block;
      }

      /* ===== Layout ===== */
      .container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 12px;
      }
      /* .wrapperMainContent {
        margin-top: calc(100vh/10);
      } */
      header,
      .section,
      .card {
        border: 1px solid var(--border);
        border-radius: var(--radius);
        background: var(--card);
        box-shadow: var(--shadow);
      }
      header {
        padding: 12px;
        position: sticky;
        top: 0;
        z-index: 30;
        backdrop-filter: saturate(1.1) blur(6px);
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .brand .logo {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--accent), var(--brand-green));
        box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.35),
          inset 0 0 0 2px rgba(0, 0, 0, 0.08);
        flex: 0 0 auto;
      }
      .brand h1 {
        font-size: clamp(18px, 3.5vw, 24px);
        margin: 0;
      }

      nav.controls {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
      }
      .row {
        display: flex;
        gap: 12px;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
      }

      /* Search under menu */
      .searchbar {
        margin-top: var(--space-section);
        padding: 8px;
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 8px;
      }
      .searchbar input[type="search"] {
        width: 100%;
        padding: 12px;
        border-radius: calc(var(--radius) - 6px);
        border: 1px solid var(--border);
        background: var(--bg);
        color: var(--fg);
        outline: none;
        box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.04);
      }
      .searchbar button {
        padding: 12px 14px;
        border-radius: calc(var(--radius) - 6px);
        border: 1px solid var(--border);
        background: var(--accent);
        color: #111;
        font-weight: 700;
        cursor: pointer;
      }

      /* Tabs (days) */
      .tabs {
        margin-top: var(--space-section);
        margin-bottom: var(--space-section);
        background: none;
        border: none;
        box-shadow: none;
        padding: 8px;
        display: flex;
        gap: 6px;
        overflow-x: auto;
        scrollbar-width: thin;
      }
      .tabs button {
        border: 1px solid var(--border);
        background: var(--bg);
        color: var(--fg);
        border-radius: 999px;
        padding: 8px 12px;
        cursor: pointer;
        white-space: nowrap;
        position: relative;
      }
      .tabs button.active {
        background: linear-gradient(
          135deg,
          rgba(212, 175, 55, 0.2),
          rgba(9, 121, 105, 0.15)
        );
        border-color: var(--accent);
        box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.25) inset;
      }

      /* Schedule table */
      .schedule.card {
        padding: 10px;
        margin-top: var(--space-section);
      }
      .table-wrap {
        overflow-x: auto;
        border-radius: calc(var(--radius) - 8px);
        border: 1px solid var(--border);
        background: var(--bg);
      }
      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        min-width: 680px;
      }
      thead th {
        position: sticky;
        top: 0;
        background: linear-gradient(0deg, var(--bg), var(--card));
        color: var(--secondary);
        text-align: start;
        font-weight: 800;
        border-bottom: 1px solid var(--border);
        padding: 12px;
      }
      tbody td {
        border-bottom: 1px dashed var(--border);
        padding: 12px;
        vertical-align: top;
      }
      tbody tr:last-child td {
        border-bottom: none;
      }
      tbody tr {
        transition: background 120ms ease;
      }
      tbody tr:hover {
        background: rgba(212, 175, 55, 0.08);
      }
      .tag {
        display: inline-block;
        padding: 4px 10px;
        border: 1px solid rgba(9, 121, 105, 0.4);
        background: rgba(9, 121, 105, 0.08);
        color: var(--fg);
        border-radius: 999px;
        font-size: 12px;
        margin-inline-end: 6px;
        margin-block: 2px;
      }

      /* Floating Tags Panel */
      .fab {
        position: fixed;
        right: 14px;
        bottom: 14px;
        z-index: 40;
      }
      .fab button {
        background: var(--brand-green);
        color: #fff;
        border: none;
        box-shadow: var(--shadow-strong);
        padding: 14px 16px;
        border-radius: 999px;
        font-weight: 700;
        cursor: pointer;
      }
      .modal {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 50;
      }
      .modal.active {
        display: flex;
      }
      .backdrop {
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.45);
      }
      .modal-panel {
        position: relative;
        width: min(680px, 92vw);
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 14px;
        box-shadow: var(--shadow-strong);
      }
      .chips {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-similar);
        margin-top: 8px;
      }
      .chip {
        border: 1px solid var(--border);
        background: var(--bg);
        color: var(--chips-color);
        padding: 8px 12px;
        border-radius: 999px;
        cursor: pointer;
        user-select: none;
      }
      .chip.active {
        background: rgba(212, 175, 55, 0.2);
        border-color: var(--accent);
        box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2) inset;
      }
      .modal-actions {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
        margin-top: 12px;
      }
      .btn {
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid var(--border);
        cursor: pointer;
      }
      .btn.primary {
        background: var(--accent);
        color: #111;
        border-color: var(--accent);
        font-weight: 800;
      }
      .btn.ghost {
        background: transparent;
        color: var(--fg);
      }

      /* Utilities */
      .section {
        padding: 10px;
        margin-top: var(--space-section);
      }
      .block-group {
        display: grid;
        gap: var(--space-similar);
      }
      .muted {
        color: var(--muted);
      }

      /* Header control group */
      .kpis {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: var(--space-similar);
      }
      .kpi {
        padding: 10px;
        border: 1px solid var(--border);
        border-radius: var(--radius);
        background: var(--bg);
      }

      /* RTL support */
      [dir="rtl"] thead th,
      [dir="rtl"] tbody td {
        text-align: start;
      }
      @media (max-width: 768px) {
         body {
           margin: 0;
           overflow: auto;
        }
      }
      /* Small screens tweaks */
      @media (max-width: 640px) {
        .row {
          gap: 8px;
        }
        .searchbar {
          grid-template-columns: 1fr;
        }
        .searchbar button {
          width: 100%;
        }
        .kpis {
          grid-template-columns: 1fr;
        }
        body {
           margin: 0;
           overflow: auto;
        }
      }
    </style>
  </head>
  <body>
    <div class="wrapperMainContent">

    </div>
    <header class="container">
      <div class="row">
        <div class="brand">
          <h1 id="title">Forum Program</h1>
        </div>
        <nav class="controls">
          <label>
            <span class="muted" data-i18n="languageLabel">Language</span>
            <select id="langSelect" aria-label="Language selector">
              <option value="en">English</option>
              <option value="ru">–†—É—Å—Å–∫–∏–π</option>
              <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            </select>
          </label>
          <button id="themeToggle" class="btn" aria-label="Toggle theme">
            üåû/üåô
          </button>
        </nav>
      </div>

      <div class="searchbar card">
        <input
          id="searchInput"
          type="search"
          placeholder="Search agenda..."
          data-i18n-ph="searchPlaceholder"
        />
        <button id="clearSearch" class="btn" data-i18n="clear">Clear</button>
      </div>
    </header>

    <main class="container">
      <section class="schedule card" aria-live="polite">
        <div class="table-wrap">
          <div class="tabs card" role="tablist" aria-label="Days">
            <!-- Tabs injected by JS -->
          </div>
          <table id="scheduleTable">
            <thead>
              <tr>
                <th data-i18n="time">Time</th>
                <th data-i18n="event">Event</th>
                <th data-i18n="duration">Duration</th>
                <th data-i18n="location">Location</th>
                <th data-i18n="type">Type</th>
              </tr>
            </thead>
            <tbody>
              <!-- Rows injected by JS -->
            </tbody>
          </table>
        </div>
      </section>
    </main>
</div>
    <div class="fab">
      <button id="openTags" aria-haspopup="dialog" data-i18n="openTags">
        Tags
      </button>
    </div>

    <!-- Tags Modal -->
    <div
      class="modal"
      id="tagsModal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="tagsTitle"
    >
      <div class="backdrop" data-close></div>
      <div class="modal-panel">
        <h2 id="tagsTitle" data-i18n="tags">Tags</h2>
        <p class="muted" data-i18n="tagsHint">
          Select tags to filter the schedule.
        </p>
        <div id="tagChips" class="chips"></div>
        <div class="modal-actions">
          <button class="btn ghost" data-action="clear" data-i18n="clear">
            Clear
          </button>
          <button class="btn primary" data-action="apply" data-i18n="apply">
            Apply
          </button>
        </div>
      </div>
    </div>

    <script>
      // ===== I18N Dictionaries (EN, RU, AR) =====
      const i18n = {
        en: {
          title: "Forum Program",
          languageLabel: "Language",
          searchPlaceholder: "Search agenda‚Ä¶",
          clear: "Clear",
          days: "Days",
          timezone: "Timezone",
          time: "Time",
          event: "Event",
          duration: "Duration",
          location: "Location",
          type: "Type",
          tags: "Tags",
          tagsHint: "Select tags to filter the schedule.",
          openTags: "Tags",
          apply: "Apply",
          day: (i) => `Day ${i}`,
          types: {
            keynote: "Keynote",
            panel: "Panel",
            workshop: "Workshop",
            networking: "Networking",
            culture: "Cultural",
            startup: "Startup",
          },
        },
        ru: {
          title: "–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ñ–æ—Ä—É–º–∞",
          languageLabel: "–Ø–∑—ã–∫",
          searchPlaceholder: "–ü–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ‚Ä¶",
          clear: "–°–±—Ä–æ—Å",
          days: "–î–Ω–µ–π",
          timezone: "–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å",
          time: "–í—Ä–µ–º—è",
          event: "–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ",
          duration: "–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
          location: "–õ–æ–∫–∞—Ü–∏—è",
          type: "–¢–∏–ø",
          tags: "–¢–µ–≥–∏",
          tagsHint: "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–≥–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã.",
          openTags: "–¢–µ–≥–∏",
          apply: "–ü—Ä–∏–º–µ–Ω–∏—Ç—å",
          day: (i) => `–î–µ–Ω—å ${i}, 2${i} —Å–µ–Ω—Ç—è–±—Ä—è`,
          types: {
            keynote: "–ü–ª–µ–Ω–∞—Ä–Ω–æ–µ",
            panel: "–ü–∞–Ω–µ–ª—å",
            workshop: "–í–æ—Ä–∫—à–æ–ø",
            networking: "–ù–µ—Ç–≤–æ—Ä–∫–∏–Ω–≥",
            culture: "–ö—É–ª—å—Ç—É—Ä–∞",
            startup: "–°—Ç–∞—Ä—Ç–∞–ø",
          },
        },
        ar: {
          title: "ÿ®ÿ±ŸÜÿßŸÖÿ¨ ÿßŸÑŸÖŸÜÿ™ÿØŸâ",
          languageLabel: "ÿßŸÑŸÑÿ∫ÿ©",
          searchPlaceholder: "ÿßÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ¨ÿØŸàŸÑ‚Ä¶",
          clear: "ŸÖÿ≥ÿ≠",
          days: "ÿßŸÑÿ£ŸäÿßŸÖ",
          timezone: "ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ≤ŸÖŸÜŸäÿ©",
          time: "ÿßŸÑŸàŸÇÿ™",
          event: "ÿßŸÑŸÅÿπÿßŸÑŸäÿ©",
          duration: "ÿßŸÑŸÖÿØÿ©",
          location: "ÿßŸÑŸÖŸÉÿßŸÜ",
          type: "ÿßŸÑŸÜŸàÿπ",
          tags: "ÿßŸÑŸàÿ≥ŸàŸÖ",
          tagsHint: "ÿßÿÆÿ™ÿ± ÿßŸÑŸàÿ≥ŸàŸÖ ŸÑÿ™ÿµŸÅŸäÿ© ÿßŸÑÿ¨ÿØŸàŸÑ.",
          openTags: "Ÿàÿ≥ŸàŸÖ",
          apply: "ÿ™ÿ∑ÿ®ŸäŸÇ",
          day: (i) => `ÿßŸÑŸäŸàŸÖ ${i}`,
          types: {
            keynote: "ŸÉŸÑŸÖÿ© ÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
            panel: "ÿ¨ŸÑÿ≥ÿ© ŸÜŸÇÿßÿ¥",
            workshop: "Ÿàÿ±ÿ¥ÿ© ÿπŸÖŸÑ",
            networking: "ÿ™ÿπÿßÿ±ŸÅ",
            culture: "ÿ´ŸÇÿßŸÅŸä",
            startup: "ÿ¥ÿ±ŸÉÿßÿ™ ŸÜÿßÿ¥ÿ¶ÿ©",
          },
        },
      };

      // ===== Demo Data (6 Days). Timestamp strings are local times (24h). =====
      const TAGS = [
        "keynote",
        "panel",
        "workshop",
        "networking",
        "culture",
        "startup",
      ];

      const events = [
        // day: 1..6
        {
          day: 1,
          start: "09:00",
          end: "10:00",
          type: "keynote",
          tags: ["keynote"],
          title: {
            en: "Opening & Registration",
            ru: "–û—Ç–∫—Ä—ã—Ç–∏–µ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",
            ar: "ÿßŸÑÿßŸÅÿ™ÿ™ÿßÿ≠ ŸàÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ",
          },
          location: {
            en: "Main Hall",
            ru: "–ì–ª–∞–≤–Ω—ã–π –∑–∞–ª",
            ar: "ÿßŸÑŸÇÿßÿπÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
          },
          desc: {
            en: "Welcome remarks and check-in.",
            ru: "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è.",
            ar: "ŸÉŸÑŸÖÿßÿ™ ÿ™ÿ±ÿ≠Ÿäÿ®Ÿäÿ© ŸàÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ.",
          },
        },
        {
          day: 1,
          start: "10:15",
          end: "11:30",
          type: "panel",
          tags: ["panel"],
          title: {
            en: "Regional Trade Panels",
            ru: "–ü–∞–Ω–µ–ª—å –æ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ",
            ar: "ÿ¨ŸÑÿ≥ÿßÿ™ ÿßŸÑÿ™ÿ¨ÿßÿ±ÿ© ÿßŸÑÿ•ŸÇŸÑŸäŸÖŸäÿ©",
          },
          location: { en: "Room A", ru: "–ó–∞–ª A", ar: "ŸÇÿßÿπÿ© ÿ£" },
          desc: {
            en: "Opportunities across MENA & Europe.",
            ru: "–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É MENA –∏ –ï–≤—Ä–æ–ø–æ–π.",
            ar: "ÿßŸÑŸÅÿ±ÿµ ÿ®ŸäŸÜ ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ¥ÿ±ŸÇ ÿßŸÑÿ£Ÿàÿ≥ÿ∑ Ÿàÿ¥ŸÖÿßŸÑ ÿ£ŸÅÿ±ŸäŸÇŸäÿß Ÿàÿ£Ÿàÿ±Ÿàÿ®ÿß.",
          },
        },
        {
          day: 1,
          start: "12:00",
          end: "13:00",
          type: "networking",
          tags: ["networking"],
          title: {
            en: "Networking Lunch",
            ru: "–û–±–µ–¥ –∏ –Ω–µ—Ç–≤–æ—Ä–∫–∏–Ω–≥",
            ar: "ÿ∫ÿØÿßÿ° ÿ™ÿπÿßÿ±ŸÅ",
          },
          location: { en: "Garden Terrace", ru: "–¢–µ—Ä—Ä–∞—Å–∞", ar: "ÿßŸÑÿ™ÿ±ÿßÿ≥" },
          desc: {
            en: "Curated meetups by sector.",
            ru: "–¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—Å—Ç—Ä–µ—á–∏ –ø–æ –æ—Ç—Ä–∞—Å–ª—è–º.",
            ar: "ŸÑŸÇÿßÿ°ÿßÿ™ ŸÖŸÜÿ≥ŸÇÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸÇÿ∑ÿßÿπÿßÿ™.",
          },
        },
        {
          day: 1,
          start: "14:00",
          end: "16:00",
          type: "workshop",
          tags: ["workshop", "startup"],
          title: {
            en: "Cross-border Startup Clinic",
            ru: "–ö—Ä–æ—Å—Å-–±–æ—Ä–¥–µ—Ä –∫–ª–∏–Ω–∏–∫–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤",
            ar: "ÿπŸäÿßÿØÿ© ŸÑŸÑÿ¥ÿ±ŸÉÿßÿ™ ÿßŸÑŸÜÿßÿ¥ÿ¶ÿ© ÿπÿ®ÿ± ÿßŸÑÿ≠ÿØŸàÿØ",
          },
          location: { en: "Lab 1", ru: "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è 1", ar: "ÿßŸÑŸÖÿπŸÖŸÑ 1" },
          desc: {
            en: "Regulatory and go-to-market.",
            ru: "–†–µ–≥—É–ª—è—Ç–æ—Ä–∏–∫–∞ –∏ –≤—ã—Ö–æ–¥ –Ω–∞ —Ä—ã–Ω–æ–∫.",
            ar: "ÿßŸÑÿ™ÿ¥ÿ±Ÿäÿπÿßÿ™ ŸàÿßŸÑÿØÿÆŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑÿ≥ŸàŸÇ.",
          },
        },

        {
          day: 2,
          start: "09:30",
          end: "10:15",
          type: "keynote",
          tags: ["keynote"],
          title: {
            en: "Sustainable Infrastructure",
            ru: "–£—Å—Ç–æ–π—á–∏–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞",
            ar: "ÿßŸÑÿ®ŸÜŸäÿ© ÿßŸÑÿ™ÿ≠ÿ™Ÿäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿØÿßŸÖÿ©",
          },
          location: {
            en: "Main Hall",
            ru: "–ì–ª–∞–≤–Ω—ã–π –∑–∞–ª",
            ar: "ÿßŸÑŸÇÿßÿπÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
          },
          desc: {
            en: "Scalable models for cities.",
            ru: "–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤.",
            ar: "ŸÜŸÖÿßÿ∞ÿ¨ ŸÇÿßÿ®ŸÑÿ© ŸÑŸÑÿ™Ÿàÿ≥Ÿëÿπ ŸÑŸÑŸÖÿØŸÜ.",
          },
        },
        {
          day: 2,
          start: "10:30",
          end: "12:00",
          type: "workshop",
          tags: ["workshop"],
          title: {
            en: "Public‚ÄìPrivate Partnership Lab",
            ru: "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –ì–ß–ü",
            ar: "ŸÖÿÆÿ™ÿ®ÿ± ÿßŸÑÿ¥ÿ±ÿßŸÉÿ© ÿ®ŸäŸÜ ÿßŸÑŸÇÿ∑ÿßÿπŸäŸÜ",
          },
          location: { en: "Room B", ru: "–ó–∞–ª B", ar: "ŸÇÿßÿπÿ© ÿ®" },
          desc: {
            en: "Case exercises.",
            ru: "–ö–µ–π—Å-—É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è.",
            ar: "ÿ™ŸÖÿßÿ±ŸäŸÜ ÿ≠ÿßŸÑÿ© ÿπŸÖŸÑŸäÿ©.",
          },
        },
        {
          day: 2,
          start: "13:00",
          end: "15:00",
          type: "panel",
          tags: ["panel"],
          title: {
            en: "Tourism & Culture Tracks",
            ru: "–¢—Ä–µ–∫–∏: —Ç—É—Ä–∏–∑–º –∏ –∫—É–ª—å—Ç—É—Ä–∞",
            ar: "ŸÖÿ≥ÿßÿ±ÿßÿ™ ÿßŸÑÿ≥Ÿäÿßÿ≠ÿ© ŸàÿßŸÑÿ´ŸÇÿßŸÅÿ©",
          },
          location: { en: "Room C", ru: "–ó–∞–ª C", ar: "ŸÇÿßÿπÿ© ÿ¨" },
          desc: {
            en: "Cross-cultural collaboration.",
            ru: "–ú–µ–∂–∫—É–ª—å—Ç—É—Ä–Ω–æ–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ.",
            ar: "ÿ™ÿπÿßŸàŸÜ ÿπÿ®ÿ± ÿßŸÑÿ´ŸÇÿßŸÅÿßÿ™.",
          },
        },

        {
          day: 3,
          start: "09:00",
          end: "10:00",
          type: "keynote",
          tags: ["keynote"],
          title: {
            en: "Digital Transformation",
            ru: "–¶–∏—Ñ—Ä–æ–≤–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è",
            ar: "ÿßŸÑÿ™ÿ≠ŸàŸÑ ÿßŸÑÿ±ŸÇŸÖŸä",
          },
          location: {
            en: "Main Hall",
            ru: "–ì–ª–∞–≤–Ω—ã–π –∑–∞–ª",
            ar: "ÿßŸÑŸÇÿßÿπÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
          },
          desc: {
            en: "Future-ready organizations.",
            ru: "–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –±—É–¥—É—â–µ–≥–æ.",
            ar: "ŸÖŸÜÿ∏ŸÖÿßÿ™ ÿ¨ÿßŸáÿ≤ÿ© ŸÑŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑ.",
          },
        },
        {
          day: 3,
          start: "10:15",
          end: "11:45",
          type: "workshop",
          tags: ["workshop"],
          title: {
            en: "AI for Operations",
            ru: "–ò–ò –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π",
            ar: "ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸÑŸÑÿπŸÖŸÑŸäÿßÿ™",
          },
          location: { en: "Lab 2", ru: "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è 2", ar: "ÿßŸÑŸÖÿπŸÖŸÑ 2" },
          desc: {
            en: "Process automation.",
            ru: "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.",
            ar: "ÿ£ÿ™ŸÖÿ™ÿ© ÿßŸÑÿπŸÖŸÑŸäÿßÿ™.",
          },
        },
        {
          day: 3,
          start: "12:00",
          end: "13:00",
          type: "networking",
          tags: ["networking", "culture"],
          title: {
            en: "Marketplace Showcase",
            ru: "–í—ã—Å—Ç–∞–≤–∫–∞-–ø–ª–æ—â–∞–¥–∫–∞",
            ar: "ÿ≥ŸàŸÇ ÿßŸÑÿπÿ±Ÿàÿ∂",
          },
          location: { en: "Expo Area", ru: "–≠–∫—Å–ø–æ-–∑–æ–Ω–∞", ar: "ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑŸÖÿπÿ±ÿ∂" },
          desc: {
            en: "Products and regional crafts.",
            ru: "–ü—Ä–æ–¥—É–∫—Ç—ã –∏ —Ä–µ–º–µ—Å–ª–∞ —Ä–µ–≥–∏–æ–Ω–∞.",
            ar: "ŸÖŸÜÿ™ÿ¨ÿßÿ™ Ÿàÿ≠Ÿêÿ±ŸÅ ŸÖŸÜ ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©.",
          },
        },

        {
          day: 4,
          start: "09:30",
          end: "10:30",
          type: "panel",
          tags: ["panel"],
          title: {
            en: "Energy & Transition",
            ru: "–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥",
            ar: "ÿßŸÑÿ∑ÿßŸÇÿ© ŸàÿßŸÑÿ™ÿ≠ŸàŸëŸÑ",
          },
          location: {
            en: "Main Hall",
            ru: "–ì–ª–∞–≤–Ω—ã–π –∑–∞–ª",
            ar: "ÿßŸÑŸÇÿßÿπÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
          },
          desc: {
            en: "Practical pathways.",
            ru: "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏.",
            ar: "ŸÖÿ≥ÿßÿ±ÿßÿ™ ÿπŸÖŸÑŸäÿ©.",
          },
        },
        {
          day: 4,
          start: "11:00",
          end: "13:00",
          type: "workshop",
          tags: ["workshop", "startup"],
          title: {
            en: "Investor Readiness",
            ru: "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–º",
            ar: "ÿßŸÑÿ¨ÿßŸáÿ≤Ÿäÿ© ŸÑŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±",
          },
          location: { en: "Room D", ru: "–ó–∞–ª D", ar: "ŸÇÿßÿπÿ© ÿØ" },
          desc: {
            en: "Pitch & metrics.",
            ru: "–ü–∏—Ç—á –∏ –º–µ—Ç—Ä–∏–∫–∏.",
            ar: "ÿßŸÑÿπÿ±ÿ∂ ŸàÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™.",
          },
        },
        {
          day: 4,
          start: "14:00",
          end: "15:30",
          type: "networking",
          tags: ["networking"],
          title: {
            en: "B2B Meetings",
            ru: "B2B-–≤—Å—Ç—Ä–µ—á–∏",
            ar: "ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ÿπŸÖŸÑ ÿ´ŸÜÿßÿ¶Ÿäÿ©",
          },
          location: {
            en: "Meeting Pods",
            ru: "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω—ã–µ",
            ar: "ÿ∫ÿ±ŸÅ ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™",
          },
          desc: {
            en: "Pre-matched sessions.",
            ru: "–ü—Ä–µ–¥—Å–º—ç—Ç—á–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏.",
            ar: "ÿ¨ŸÑÿ≥ÿßÿ™ ŸÖÿ™ÿ∑ÿßÿ®ŸÇÿ© ŸÖÿ≥ÿ®ŸÇŸãÿß.",
          },
        },

        {
          day: 5,
          start: "09:00",
          end: "10:00",
          type: "keynote",
          tags: ["keynote"],
          title: {
            en: "Logistics & Ports",
            ru: "–õ–æ–≥–∏—Å—Ç–∏–∫–∞ –∏ –ø–æ—Ä—Ç—ã",
            ar: "ÿßŸÑŸÑŸàÿ¨ÿ≥ÿ™Ÿäÿßÿ™ ŸàÿßŸÑŸÖŸàÿßŸÜÿ¶",
          },
          location: {
            en: "Main Hall",
            ru: "–ì–ª–∞–≤–Ω—ã–π –∑–∞–ª",
            ar: "ÿßŸÑŸÇÿßÿπÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
          },
          desc: {
            en: "Seamless corridors.",
            ru: "–ë–µ—Å—à–æ–≤–Ω—ã–µ –∫–æ—Ä–∏–¥–æ—Ä—ã.",
            ar: "ŸÖŸÖÿ±ÿßÿ™ ÿ≥ŸÑÿ≥ÿ©.",
          },
        },
        {
          day: 5,
          start: "10:30",
          end: "12:00",
          type: "panel",
          tags: ["panel"],
          title: {
            en: "Food Security & AgriTech",
            ru: "–ü—Ä–æ–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –∏ –∞–≥—Ä–æ—Ç–µ—Ö",
            ar: "ÿßŸÑÿ£ŸÖŸÜ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿä ŸàÿßŸÑÿ™ŸÇŸÜŸäÿßÿ™ ÿßŸÑÿ≤ÿ±ÿßÿπŸäÿ©",
          },
          location: { en: "Room E", ru: "–ó–∞–ª E", ar: "ŸÇÿßÿπÿ© Ÿá" },
          desc: {
            en: "Supply resilience.",
            ru: "–£—Å—Ç–æ–π—á–∏–≤—ã–µ —Ü–µ–ø–æ—á–∫–∏.",
            ar: "ŸÖÿ±ŸàŸÜÿ© ÿ≥ŸÑÿßÿ≥ŸÑ ÿßŸÑÿ•ŸÖÿØÿßÿØ.",
          },
        },
        {
          day: 5,
          start: "13:00",
          end: "15:00",
          type: "workshop",
          tags: ["workshop"],
          title: {
            en: "Standards & Compliance",
            ru: "–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∏ –∫–æ–º–ø–ª–∞–µ–Ω—Å",
            ar: "ÿßŸÑŸÖÿπÿßŸäŸäÿ± ŸàÿßŸÑÿßŸÖÿ™ÿ´ÿßŸÑ",
          },
          location: { en: "Lab 3", ru: "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è 3", ar: "ÿßŸÑŸÖÿπŸÖŸÑ 3" },
          desc: {
            en: "Certifications for trade.",
            ru: "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏.",
            ar: "ÿ¥ŸáÿßÿØÿßÿ™ ŸÑŸÑÿ™ÿ¨ÿßÿ±ÿ©.",
          },
        },

        {
          day: 6,
          start: "09:30",
          end: "10:30",
          type: "startup",
          tags: ["startup", "panel"],
          title: {
            en: "Startup Pitch Stage",
            ru: "–°—Ü–µ–Ω–∞ –ø–∏—Ç—á–µ–π —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤",
            ar: "ŸÖŸÜÿµÿ© ÿπÿ±Ÿàÿ∂ ÿßŸÑÿ¥ÿ±ŸÉÿßÿ™ ÿßŸÑŸÜÿßÿ¥ÿ¶ÿ©",
          },
          location: {
            en: "Main Hall",
            ru: "–ì–ª–∞–≤–Ω—ã–π –∑–∞–ª",
            ar: "ÿßŸÑŸÇÿßÿπÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
          },
          desc: {
            en: "Fast pitches to jury.",
            ru: "–ö–æ—Ä–æ—Ç–∫–∏–µ –ø–∏—Ç—á–∏ –∂—é—Ä–∏.",
            ar: "ÿπÿ±Ÿàÿ∂ ÿ≥ÿ±Ÿäÿπÿ© ÿ£ŸÖÿßŸÖ ŸÑÿ¨ŸÜÿ©.",
          },
        },
        {
          day: 6,
          start: "11:00",
          end: "12:30",
          type: "panel",
          tags: ["panel"],
          title: {
            en: "Cross-border Finance",
            ru: "–¢—Ä–∞–Ω—Å–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å—ã",
            ar: "ÿßŸÑÿ™ŸÖŸàŸäŸÑ ÿπÿ®ÿ± ÿßŸÑÿ≠ÿØŸàÿØ",
          },
          location: { en: "Room F", ru: "–ó–∞–ª F", ar: "ŸÇÿßÿπÿ© Ÿà" },
          desc: {
            en: "Instruments & risk.",
            ru: "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ä–∏—Å–∫–∏.",
            ar: "ÿßŸÑÿ£ÿØŸàÿßÿ™ ŸàÿßŸÑŸÖÿÆÿßÿ∑ÿ±.",
          },
        },
        {
          day: 6,
          start: "13:00",
          end: "14:00",
          type: "culture",
          tags: ["culture", "networking"],
          title: {
            en: "Closing Mixer",
            ru: "–ó–∞–∫—Ä—ã–≤–∞—é—â–∏–π –º–∏–∫—Å–µ—Ä",
            ar: "ŸÑŸÇÿßÿ° ÿÆÿ™ÿßŸÖŸä",
          },
          location: { en: "Garden Terrace", ru: "–¢–µ—Ä—Ä–∞—Å–∞", ar: "ÿßŸÑÿ™ÿ±ÿßÿ≥" },
          desc: {
            en: "Informal wrap-up.",
            ru: "–ù–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ.",
            ar: "ÿÆÿ™ÿßŸÖ ÿ∫Ÿäÿ± ÿ±ÿ≥ŸÖŸä.",
          },
        },
      ];

      // ===== State =====
      const state = {
        lang: localStorage.getItem("forum_lang") || "en",
        theme: localStorage.getItem("forum_theme") || "light",
        day: 1,
        tags: JSON.parse(localStorage.getItem("forum_tags") || "[]"),
        search: "",
      };

      // ===== Helpers =====
      const $ = (sel) => document.querySelector(sel);
      const $$ = (sel) => Array.from(document.querySelectorAll(sel));

      function setLang(lang) {
        state.lang = lang;
        localStorage.setItem("forum_lang", lang);
        // dir & lang
        const ltr = lang === "ar" ? "rtl" : "ltr";
        document.documentElement.lang = lang;
        document.documentElement.dir = ltr;
        // update static labels
        const dict = i18n[lang];
        $("#title").textContent = dict.title;
        $$("[data-i18n]").forEach((el) => {
          const key = el.getAttribute("data-i18n");
          const val = dict[key];
          if (typeof val === "function") return; // handled where used
          if (val) el.textContent = val;
        });
        $$("[data-i18n-ph]").forEach((el) => {
          const key = el.getAttribute("data-i18n-ph");
          const val = dict[key];
          if (val) el.setAttribute("placeholder", val);
        });
        // tabs re-render (labels use day(i)) & table re-render
        renderTabs();
        renderTable();
        // refresh select
        $("#langSelect").value = lang;
      }

      function setTheme(theme) {
        state.theme = theme;
        localStorage.setItem("forum_theme", theme);
        document.documentElement.classList.toggle(
          "theme-dark",
          theme === "dark"
        );
      }

      function duration(start, end) {
        const [sh, sm] = start.split(":").map(Number);
        const [eh, em] = end.split(":").map(Number);
        let mins = eh * 60 + em - (sh * 60 + sm);
        if (mins < 0) mins += 24 * 60;
        const h = Math.floor(mins / 60),
          m = mins % 60;
        return (h ? h + "h " : "") + (m ? m + "m" : "").trim() || "‚Äî";
      }

      function renderTabs() {
        const tabs = $(".tabs");
        tabs.innerHTML = "";
        for (let i = 1; i <= 6; i++) {
          const btn = document.createElement("button");
          btn.role = "tab";
          btn.ariaSelected = state.day === i;
          const label = i18n[state.lang].day(i);
          btn.textContent = label;
          btn.classList.toggle("active", state.day === i);
          btn.addEventListener("click", () => {
            state.day = i;
            renderTabs();
            renderTable();
          });
          tabs.appendChild(btn);
        }
      }

      function matchesFilters(ev) {
        // Tag filter
        if (state.tags.length) {
          if (!ev.tags.some((t) => state.tags.includes(t))) return false;
        }
        // Search filter
        if (state.search) {
          const needle = state.search.toLowerCase();
          const lang = state.lang;
          const hay = [ev.title[lang], ev.desc[lang], ev.location[lang]]
            .join(" ")
            .toLowerCase();
          if (!hay.includes(needle)) return false;
        }
        return true;
      }

      function renderTable() {
        const tbody = $("#scheduleTable tbody");
        const dict = i18n[state.lang];
        tbody.innerHTML = "";
        const dayEvents = events
          .filter((e) => e.day === state.day)
          .sort((a, b) => a.start.localeCompare(b.start));
        const visible = dayEvents.filter(matchesFilters);
        for (const ev of visible) {
          const tr = document.createElement("tr");
          // time
          const tdTime = document.createElement("td");
          tdTime.textContent = `${ev.start} ‚Äì ${ev.end}`;
          tr.appendChild(tdTime);
          // event
          const tdEvent = document.createElement("td");
          const title = document.createElement("div");
          title.innerHTML = `<strong>${ev.title[state.lang]}</strong>`;
          tdEvent.appendChild(title);
          const desc = document.createElement("div");
          desc.className = "muted";
          desc.textContent = ev.desc[state.lang];
          tdEvent.appendChild(desc);
          tr.appendChild(tdEvent);
          // duration
          const tdDur = document.createElement("td");
          tdDur.textContent = duration(ev.start, ev.end);
          tr.appendChild(tdDur);
          // location
          const tdLoc = document.createElement("td");
          tdLoc.textContent = ev.location[state.lang];
          tr.appendChild(tdLoc);
          // type/tags
          const tdType = document.createElement("td");
          const typeLabel = dict.types[ev.type] || ev.type;
          const typeSpan = document.createElement("span");
          typeSpan.className = "tag";
          typeSpan.textContent = typeLabel;
          tdType.appendChild(typeSpan);
          ev.tags.forEach((tag) => {
            if (tag !== ev.type) {
              const sp = document.createElement("span");
              sp.className = "tag";
              sp.textContent = dict.types[tag] || tag;
              tdType.appendChild(sp);
            }
          });
          tr.appendChild(tdType);
          tbody.appendChild(tr);
        }
        // Empty state
        if (!visible.length) {
          const tr = document.createElement("tr");
          const td = document.createElement("td");
          td.colSpan = 5;
          td.className = "muted";
          td.textContent =
            state.lang === "ar"
              ? "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨ ŸÖÿ∑ÿßÿ®ŸÇÿ©."
              : state.lang === "ru"
              ? "–ù–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤."
              : "No matching results.";
          tr.appendChild(td);
          tbody.appendChild(tr);
        }
      }

      function buildTagChips() {
        const wrap = $("#tagChips");
        wrap.innerHTML = "";
        TAGS.forEach((t) => {
          const b = document.createElement("button");
          b.type = "button";
          b.className = "chip";
          b.textContent = i18n[state.lang].types[t] || t;
          b.dataset.value = t;
          if (state.tags.includes(t)) b.classList.add("active");
          b.addEventListener("click", () => {
            b.classList.toggle("active");
          });
          wrap.appendChild(b);
        });
      }

      // ===== Modal Controls =====
      const modal = $("#tagsModal");
      $("#openTags").addEventListener("click", () => {
        buildTagChips();
        modal.classList.add("active");
      });
      modal.addEventListener("click", (e) => {
        if (e.target.hasAttribute("data-close"))
          modal.classList.remove("active");
      });
      modal
        .querySelector('[data-action="apply"]')
        .addEventListener("click", () => {
          const selected = $$("#tagChips .chip.active").map(
            (c) => c.dataset.value
          );
          state.tags = selected;
          localStorage.setItem("forum_tags", JSON.stringify(selected));
          modal.classList.remove("active");
          renderTable();
        });
      modal
        .querySelector('[data-action="clear"]')
        .addEventListener("click", () => {
          state.tags = [];
          localStorage.setItem("forum_tags", "[]");
          buildTagChips();
          renderTable();
        });

      // ===== Search Controls =====
      $("#searchInput").addEventListener("input", (e) => {
        state.search = e.target.value.trim();
        renderTable();
      });
      $("#clearSearch").addEventListener("click", () => {
        state.search = "";
        $("#searchInput").value = "";
        renderTable();
      });

      // ===== Theme + Lang Controls =====
      $("#themeToggle").addEventListener("click", () => {
        setTheme(state.theme === "light" ? "dark" : "light");
      });
      $("#langSelect").addEventListener("change", (e) =>
        setLang(e.target.value)
      );

      // ===== Init =====
      (function init() {
        setTheme(state.theme);
        setLang(state.lang);
        renderTabs();
        renderTable();
      })();
    </script>
  </body>
</html>
